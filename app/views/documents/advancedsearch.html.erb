<script>
  $(function() {
    // is expecting an array of names
    var peopleList = <%= @people.to_s.html_safe %>;
    $( "#people" ).autocomplete({
      source: peopleList
    });

    var placesList = <%= @locations.to_s.html_safe %>;
    $( "#location" ).autocomplete({
      source: placesList
    });
  });
</script>

<h2>Search</h2>

<!-- <h3>Search by Text</h3> -->


<div class="row">
  <div class="col-md-6">
   <p>Enter any name, word, or series of words to search across all case documents.</p>

   <%= render "partials/search_bar" %>

  </div><!--/column-->

  <div class="col-md-6">

    <div class="well well-sm">

      <p>To exclude a word, precede with "-": <em>slavery -petition</em><br/>
         To search for a phrase, use quotations: <em>"unjustly held in bondage"</em><br/>
         You can combine these techniques: <em>"entitled to freedom" -report</em></p>

    </div>
  </div>
<br/><br/>
</div>
<div class="row">
  <div class="col-md-6">

    <h4>Search for Person</h4>
    <p>A guided search of the people named across all case documents.</p>

    <%= form_tag search_path, :method => "get", :class => "form-inline" do %>
      <div class="form-group">
        <%= hidden_field_tag(:qfield, "people_ss") %>
        <%= hidden_field_tag(:sort, "score") %>
        <%= hidden_field_tag(:facet, "person") %>
        <%= text_field_tag(:qtext, nil, :placeholder => "Search by Person", :id => "people", :class => "form-control") %>
        <%= submit_tag("Search", :class => "btn btn-info") %>
      </div>
    <% end %>
  </div><!--/column-->

  <div class="col-md-6">

    <h4>Search for Place</h4>
    <p>A guided search of the places named across all case documents.</p>
    <%= form_tag search_path, :method => "get", :class => "form-inline" do %>
      <div class="form-group">
        <%= hidden_field_tag(:qfield, "places") %>
        <%= text_field_tag(:qtext, nil, :placeholder => "Search by Place", :id => "location", :class => "form-control") %>
        <%= submit_tag("Search", :class => "btn btn-info") %>
      </div>
    <% end %>

  </div><!--/column-->
</div><!--/row-->

<br/><br/>

<div class="row">
  <div class="col-md-6">
    <h4>Explore By Connection Type <span class="label label-danger">Experimental</span></h4>
    <p>View people by the type of their relationships (enslaved by, spouse of, neighbor of, etc.)</p>

    <% type_options = get_relationship_types %>

    <%= form_tag connection_type_path, :method => "get", :class => "form-inline" do %>
      <div class="form-group">
        <%= select_tag :type, options_for_select(type_options, params[:type]), :prompt => "Select Relationship", :class => "custom-dropdown__select" %>
        <%= submit_tag("Go!", :class => "btn btn-info") %>
      </div>
    <% end %>
  </div>

  <div class="col-md-6">

    <h4>Browse Attorney Relationships <span class="label label-danger">Experimental</span></h4>
    <p>Explore connections between attorneys.</p>

    <%= form_tag relationships_path, :method => "get", :class => "form-inline" do %>
      <div class="form-group">
        <%= select_tag :per1id, options_for_select(@attorneys, params["per1id"]), :prompt => "Select First Attorney", :class => "custom-dropdown__select" %>
        <%= select_tag :per2id, options_for_select(@attorneys, params["per2id"]), :prompt => "Select Second Attorney", :class => "custom-dropdown__select" %>
        <%= submit_tag("Find Relationships", :class => "btn btn-info") %>
      </div>
    <% end %>
  </div>
</div><!--/row-->




